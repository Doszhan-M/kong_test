09:08:41 - INFO -Started server process [9] (server.py:75)
09:08:41 - INFO -Waiting for application startup. (on.py:45)
09:08:41 - INFO -Application startup complete. (on.py:59)
15:42:21 - INFO -172.21.0.8:44692 - "GET /api_goszakup?iin_bin=071140021902 HTTP/1.1" 200 (httptools_impl.py:437)
15:42:21 - INFO -172.21.0.8:44708 - "GET /elicense?bin=071140021902 HTTP/1.1" 200 (httptools_impl.py:437)
15:42:22 - INFO -172.21.0.8:44712 - "GET /api_goszakup_unrelaible?iin_bin=071140021902 HTTP/1.1" 200 (httptools_impl.py:437)
15:43:07 - INFO -172.21.0.1:47486 - "GET /docs HTTP/1.1" 200 (httptools_impl.py:437)
15:43:08 - INFO -172.21.0.1:47486 - "GET /openapi.json HTTP/1.1" 200 (httptools_impl.py:437)
15:43:13 - INFO -172.21.0.1:47486 - "GET /elicense?bin=071140021902 HTTP/1.1" 200 (httptools_impl.py:437)
15:43:56 - INFO -172.21.0.1:47484 - "GET /elicense?bin=071140021902 HTTP/1.1" 200 (httptools_impl.py:437)
15:44:32 - INFO -172.21.0.8:44690 - "GET /api_payments?bin=071140021902&start_date=2000-01-01 HTTP/1.1" 500 (httptools_impl.py:437)
15:44:32 - ERROR -Exception in ASGI application
 (httptools_impl.py:375)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/urllib3/connection.py", line 174, in _new_conn
    conn = connection.create_connection(
  File "/usr/local/lib/python3.10/site-packages/urllib3/util/connection.py", line 95, in create_connection
    raise err
  File "/usr/local/lib/python3.10/site-packages/urllib3/util/connection.py", line 85, in create_connection
    sock.connect(sa)
TimeoutError: [Errno 110] Connection timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py", line 703, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py", line 398, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/local/lib/python3.10/site-packages/urllib3/connection.py", line 239, in request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)
  File "/usr/local/lib/python3.10/http/client.py", line 1282, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/local/lib/python3.10/http/client.py", line 1328, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.10/http/client.py", line 1277, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.10/http/client.py", line 1037, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.10/http/client.py", line 975, in send
    self.connect()
  File "/usr/local/lib/python3.10/site-packages/urllib3/connection.py", line 205, in connect
    conn = self._new_conn()
  File "/usr/local/lib/python3.10/site-packages/urllib3/connection.py", line 179, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x7f756e71ef20>, 'Connection to open.egov.kz timed out. (connect timeout=None)')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/requests/adapters.py", line 440, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py", line 785, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.10/site-packages/urllib3/util/retry.py", line 592, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='open.egov.kz', port=80): Max retries exceeded with url: /proxy2/culs_payments?token=1af98c4aed474b6199ea44db15ee303c (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7f756e71ef20>, 'Connection to open.egov.kz timed out. (connect timeout=None)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 372, in run_asgi
    result = await app(self.scope, self.receive, self.send)
  File "/usr/local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 75, in __call__
    return await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/fastapi/applications.py", line 261, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 181, in __call__
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
    raise e
  File "/usr/local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 227, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 162, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/site-packages/starlette/concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/site-packages/anyio/to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 867, in run
    result = context.run(func, *args)
  File "/home/api_app/./main.py", line 70, in api_payments
    return api_payments_parser(bin, start_date,)
  File "/home/api_app/./parsers/api_payments_parser.py", line 23, in api_payments_parser
    response = request("POST", url, headers=headers, data=payload)
  File "/usr/local/lib/python3.10/site-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/requests/sessions.py", line 529, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.10/site-packages/requests/sessions.py", line 645, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.10/site-packages/requests/adapters.py", line 507, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='open.egov.kz', port=80): Max retries exceeded with url: /proxy2/culs_payments?token=1af98c4aed474b6199ea44db15ee303c (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7f756e71ef20>, 'Connection to open.egov.kz timed out. (connect timeout=None)'))
15:46:25 - INFO -172.21.0.1:56062 - "GET /docs HTTP/1.1" 200 (httptools_impl.py:437)
15:46:26 - INFO -172.21.0.1:56062 - "GET /openapi.json HTTP/1.1" 200 (httptools_impl.py:437)
15:46:30 - INFO -172.21.0.1:56062 - "GET /elicense?bin=071140021902 HTTP/1.1" 200 (httptools_impl.py:437)
